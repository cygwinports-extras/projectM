--- origsrc/libprojectM-1.2.0/Common.hpp	2008-06-11 22:39:28.000000000 -0500
+++ src/libprojectM-1.2.0/Common.hpp	2009-07-12 11:36:08.965809200 -0500
@@ -60,11 +60,8 @@ extern FILE *fmemopen(void *buf, size_t 
 #define projectM_isnan isnan
 #endif
 
-#ifdef LINUX
-#define projectM_isnan isnan
-#endif
-
-#ifdef WIN32
+#ifndef isnan
+#undef projectM_isnan
 #define projectM_isnan(x) ((x) != (x))
 #endif
 
